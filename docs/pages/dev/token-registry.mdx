---
title: TokenRegistry
---

The [TokenRegistry](https://github.com/hyperliquid-dev/hyper-evm-lib/blob/main/src/registry/TokenRegistry.sol) provides an onchain mapping between EVM token addresses and their corresponding HyperCore token indexes, populated trustlessly using precompile lookups.

`TokenRegistry` is deployed on HyperEVM mainnet at [0x0b51d1a9098cf8a72c325003f44c194d41d7a85b](https://hyperevmscan.io/address/0x0b51d1a9098cf8a72c325003f44c194d41d7a85b).

### Usage

**Direct Usage:**

```solidity
ITokenRegistry tokenRegistry = ITokenRegistry(0x0b51d1a9098cf8a72c325003f44c194d41d7a85b);

// Get the token index for an evm token address 
uint32 tokenIdx = tokenRegistry.getTokenIndex(tokenAddress);

// Read a user's spot balance using the token index
uint256 spotBalance = PrecompileLib.spotBalance(tokenIdx, user);
```

**Usage through PrecompileLib:** The `PrecompileLib` exposes a [getTokenIndex](https://github.com/hyperliquid-dev/hyper-evm-lib/blob/b347756c392934712af9c27b92028a00b93cb68c/src/PrecompileLib.sol#L61-L66) function to read from the `TokenRegistry`, and can be used instead of directly interacting with the `TokenRegistry` contract. 

```solidity
uint64 tokenIdx = PrecompileLib.getTokenIndex(tokenAddress);
```

### Motivation

Calling HyperCore precompiles (for example, `spotBalance` and `spotPx`) requires token and spot market indexes, but those indexes canâ€™t be derived from an EVM token address natively onchain. 

TokenRegistry fills that gap with a trustless, on-chain mapping from EVM token addresses to their corresponding token and spot indexes, populated via precompile lookups, so contracts and tests can resolve indexes reliably. 


